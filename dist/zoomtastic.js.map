{"version":3,"file":"zoomtastic.js","sources":["../src/polyfills.js","../src/zoomtastic.ts"],"sourcesContent":["// Object.assign polyfill\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\r\nif (!Object.assign) {\r\n\tconsole.log('Object.assing polyfill enabled');\r\n\r\n\tObject.defineProperty(Object, 'assign', {\r\n\t\tenumerable: false,\r\n\t\tconfigurable: true,\r\n\t\twritable: true,\r\n\t\tvalue: function (target) {\r\n\t\t\t'use strict';\r\n\r\n\t\t\tif (target === undefined || target === null) {\r\n\t\t\t\tthrow new TypeError('Cannot convert first argument to object');\r\n\t\t\t}\r\n\r\n\t\t\tvar to = Object(target);\r\n\t\t\tfor (var i = 1; i < arguments.length; i++) {\r\n\t\t\t\tvar nextSource = arguments[i];\r\n\t\t\t\tif (nextSource === undefined || nextSource === null) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tnextSource = Object(nextSource);\r\n\r\n\t\t\t\tvar keysArray = Object.keys(Object(nextSource));\r\n\t\t\t\tfor (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\r\n\t\t\t\t\tvar nextKey = keysArray[nextIndex];\r\n\t\t\t\t\tvar desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\r\n\t\t\t\t\tif (desc !== undefined && desc.enumerable) {\r\n\t\t\t\t\t\tto[nextKey] = nextSource[nextKey];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn to;\r\n\t\t},\r\n\t});\r\n}\r\n\r\n// NodeList.forEach polyfill\r\n// https://developer.mozilla.org/en-US/docs/Web/API/NodeList/forEach\r\nif (window.NodeList && !NodeList.prototype.forEach) {\r\n\tconsole.log('NodeList.forEach polyfill enabled');\r\n\r\n\tNodeList.prototype.forEach = function (callback, thisArg) {\r\n\t\tthisArg = thisArg || window;\r\n\t\tfor (var i = 0; i < this.length; i++) {\r\n\t\t\tcallback.call(thisArg, this[i], i, this);\r\n\t\t}\r\n\t};\r\n}\r\n","// Polyfills for IE support\r\nimport './polyfills';\r\n\r\n/** Zoomtastic config */\r\ninterface ZoomtasticConfig {\r\n\tpreload?: boolean;\r\n\tduration?: number;\r\n\tdelay?: number;\r\n\tzoomInCursor?: string;\r\n\tzoomOutCursor?: string;\r\n\tbackground?: string;\r\n\teasing?: string;\r\n\tzIndex?: string | number;\r\n\ttop?: string | number;\r\n\tleft?: string | number;\r\n\twidth?: string | number;\r\n\theight?: string | number;\r\n\tbaseTop?: string | number;\r\n\tbaseLeft?: string | number;\r\n\tbaseWidth?: string | number;\r\n\tbaseHeight?: string | number;\r\n\tonShow?: () => void;\r\n\tonHide?: () => void;\r\n}\r\n\r\n/** Zoomtastic - Tiny image zoomer for web! */\r\nclass Zoomtastic {\r\n\tprivate config: ZoomtasticConfig = {\r\n\t\tpreload: true,\r\n\t\tduration: 150,\r\n\t\tdelay: 200,\r\n\t\tzoomInCursor: 'zoom-in',\r\n\t\tzoomOutCursor: 'zoom-out',\r\n\t\tbackground: 'rgba(0, 0, 0, 0.75)',\r\n\t\teasing: 'ease-out',\r\n\t\tzIndex: '16777271',\r\n\t\ttop: '50%',\r\n\t\tleft: '50%',\r\n\t\twidth: '95%',\r\n\t\theight: '95%',\r\n\t\tbaseTop: '55%',\r\n\t\tbaseLeft: '50%',\r\n\t\tbaseHeight: '90%',\r\n\t\tbaseWidth: '90%',\r\n\t};\r\n\r\n\t/**\r\n\t * Setup zoomtastic\r\n\t * @param config Viewer config\r\n\t */\r\n\tconstructor(config?: ZoomtasticConfig) {\r\n\t\tif (config) {\r\n\t\t\tif (typeof this.config !== 'object') throw new TypeError('Config must be an object');\r\n\t\t\tthis.config = Object.assign(this.config, config);\r\n\r\n\t\t\tif (typeof this.config.preload !== 'boolean') throw new TypeError('Field \"preload\" must be a boolean');\r\n\t\t\tif (typeof this.config.duration !== 'number') throw new TypeError('Field \"duration\" must be a number');\r\n\t\t\tif (typeof this.config.delay !== 'number') throw new TypeError('Field \"delay\" must be a number');\r\n\t\t\tif (typeof this.config.zoomInCursor !== 'string') throw new TypeError('Field \"zoomInCursor\" must be a string');\r\n\t\t\tif (typeof this.config.zoomOutCursor !== 'string') throw new TypeError('Field \"zoomOutCursor\" must be a string');\r\n\t\t\tif (typeof this.config.background !== 'string') throw new TypeError('Field \"background\" must be a string');\r\n\t\t\tif (typeof this.config.easing !== 'string') throw new TypeError('Field \"easing\" must be a string');\r\n\t\t\tif (typeof this.config.top !== 'string') throw new TypeError('Field \"top\" must be a string');\r\n\t\t\tif (typeof this.config.left !== 'string') throw new TypeError('Field \"left\" must be a string');\r\n\t\t\tif (typeof this.config.width !== 'string' && typeof this.config.width !== 'number') throw new TypeError('Field \"width\" must be a number or string');\r\n\t\t\tif (typeof this.config.height !== 'string' && typeof this.config.height !== 'number') throw new TypeError('Field \"height\" must be a number or string');\r\n\t\t}\r\n\r\n\t\t// Mount elements to the page\r\n\t\tthis.mount();\r\n\t}\r\n\r\n\t/**\r\n\t * Initialize viewer element\r\n\t */\r\n\tprivate mount(): void {\r\n\t\tconst existingContainer: HTMLElement = document.getElementById('zoomtastic-container');\r\n\t\tif (existingContainer) existingContainer.remove();\r\n\r\n\t\t// Container element\r\n\t\tconst container: HTMLDivElement = document.createElement('div');\r\n\t\tcontainer.id = 'zoomtastic-container';\r\n\t\tcontainer.style.top = '0';\r\n\t\tcontainer.style.left = '0';\r\n\t\tcontainer.style.width = '100%';\r\n\t\tcontainer.style.height = '100vh';\r\n\t\tcontainer.style.opacity = '0';\r\n\t\tcontainer.style.position = 'fixed';\r\n\t\tcontainer.style.overflow = 'hidden';\r\n\t\tcontainer.style.cursor = this.config.zoomOutCursor;\r\n\t\tcontainer.style.zIndex = String(this.config.zIndex);\r\n\t\tcontainer.style.backgroundColor = this.config.background;\r\n\t\tcontainer.style.transitionProperty = 'all';\r\n\t\tcontainer.style.transitionDuration = this.config.duration + 'ms';\r\n\t\tcontainer.style.transitionTimingFunction = this.config.easing;\r\n\t\tcontainer.style.display = 'none';\r\n\r\n\t\t// Image element\r\n\t\tconst image: HTMLDivElement = document.createElement('div');\r\n\t\timage.id = 'zoomtastic-image';\r\n\t\timage.style.top = String(this.config.baseTop);\r\n\t\timage.style.left = String(this.config.baseLeft);\r\n\t\timage.style.width = String(this.config.baseWidth);\r\n\t\timage.style.height = String(this.config.baseHeight);\r\n\t\timage.style.zIndex = String(this.config.zIndex);\r\n\t\timage.style.opacity = '0';\r\n\t\timage.style.display = 'block';\r\n\t\timage.style.position = 'absolute';\r\n\t\timage.style.transform = 'translate(-50%, -50%)';\r\n\t\timage.style.backgroundSize = 'contain';\r\n\t\timage.style.backgroundRepeat = 'no-repeat';\r\n\t\timage.style.backgroundPosition = 'center';\r\n\t\timage.style.transitionProperty = 'all';\r\n\t\timage.style.transitionDuration = this.config.duration + 'ms';\r\n\t\timage.style.transitionTimingFunction = this.config.easing;\r\n\t\timage.style.filter = 'drop-shadow(0 4px 64px rgba(0, 0, 0, 0.5))';\r\n\r\n\t\tcontainer.addEventListener('click', () => this.hide());\r\n\r\n\t\tcontainer.appendChild(image);\r\n\t\tdocument.body.appendChild(container);\r\n\t}\r\n\r\n\t/**\r\n\t * Listen elements for automatic image zooming\r\n\t * @param selector Elements selector\r\n\t */\r\n\tpublic listen(selector: string): void {\r\n\t\tconst elements: NodeListOf<Element> = document.querySelectorAll('[zoomtastic]');\r\n\r\n\t\t// Add event listener to each found element\r\n\t\telements.forEach((item: HTMLElement) => {\r\n\t\t\titem.style.cursor = this.config.zoomInCursor;\r\n\r\n\t\t\titem.addEventListener('click', (event: MouseEvent) => {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t// Get image url from attributes\r\n\t\t\t\tlet url: string = item.getAttribute('zoomtastic') || item.getAttribute('src');\r\n\t\t\t\tif (url) this.show(url);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Show image\r\n\t * @param url Image url\r\n\t */\r\n\tpublic show(url: string): void {\r\n\t\tlet ready: boolean = !this.config.preload;\r\n\r\n\t\tconst container: HTMLElement = document.getElementById('zoomtastic-container');\r\n\t\tconst image: HTMLElement = document.getElementById('zoomtastic-image');\r\n\r\n\t\t// Show container\r\n\t\tcontainer.style.display = 'block';\r\n\t\tsetTimeout(() => (container.style.opacity = '1'), 0);\r\n\r\n\t\t// Preload image\r\n\t\tif (this.config.preload) {\r\n\t\t\tconst preloadedImage: HTMLImageElement = new Image();\r\n\t\t\tpreloadedImage.onload = () => {\r\n\t\t\t\tready = true;\r\n\t\t\t\tif (typeof this.config.onShow === 'function') this.config.onShow();\r\n\t\t\t};\r\n\t\t\tpreloadedImage.src = url;\r\n\t\t} else {\r\n\t\t\tif (typeof this.config.onShow === 'function') this.config.onShow();\r\n\t\t}\r\n\r\n\t\t// Show image\r\n\t\tsetTimeout(() => {\r\n\t\t\tconst loading: NodeJS.Timeout = setInterval(() => {\r\n\t\t\t\tif (ready) {\r\n\t\t\t\t\timage.style.backgroundImage = `url(\"${url}\")`;\r\n\t\t\t\t\timage.style.opacity = '1';\r\n\t\t\t\t\timage.style.top = String(this.config.top);\r\n\t\t\t\t\timage.style.left = String(this.config.left);\r\n\t\t\t\t\timage.style.width = String(this.config.width);\r\n\t\t\t\t\timage.style.height = String(this.config.height);\r\n\t\t\t\t\tclearInterval(loading);\r\n\t\t\t\t}\r\n\t\t\t}, 10);\r\n\t\t}, this.config.delay);\r\n\t}\r\n\r\n\t/**\r\n\t * Hide zoomed image\r\n\t */\r\n\tpublic hide(): void {\r\n\t\tconst container: HTMLElement = document.getElementById('zoomtastic-container');\r\n\t\tconst image: HTMLElement = document.getElementById('zoomtastic-image');\r\n\r\n\t\t// Event call\r\n\t\tif (typeof this.config.onHide === 'function') this.config.onHide();\r\n\r\n\t\t// Hide image\r\n\t\timage.style.opacity = '0';\r\n\t\timage.style.top = String(this.config.baseTop);\r\n\t\timage.style.left = String(this.config.baseLeft);\r\n\t\timage.style.width = String(this.config.baseWidth);\r\n\t\timage.style.height = String(this.config.baseHeight);\r\n\r\n\t\t// Hide container\r\n\t\tsetTimeout(() => {\r\n\t\t\tcontainer.style.opacity = '0';\r\n\r\n\t\t\t// Set display none after transition\r\n\t\t\tsetTimeout(() => (container.style.display = 'none'), this.config.duration);\r\n\t\t}, this.config.delay);\r\n\t}\r\n}\r\n\r\nexport default Zoomtastic;\r\n"],"names":["Object","assign","console","log","defineProperty","enumerable","configurable","writable","value","target","TypeError","to","i","arguments","length","nextSource","keysArray","keys","nextIndex","len","nextKey","desc","getOwnPropertyDescriptor","undefined","window","NodeList","prototype","forEach","callback","thisArg","this","call","Zoomtastic","constructor","config","preload","duration","delay","zoomInCursor","zoomOutCursor","background","easing","zIndex","top","left","width","height","baseTop","baseLeft","baseHeight","baseWidth","mount","existingContainer","document","getElementById","remove","container","createElement","id","style","opacity","position","overflow","cursor","String","backgroundColor","transitionProperty","transitionDuration","transitionTimingFunction","display","image","transform","backgroundSize","backgroundRepeat","backgroundPosition","filter","addEventListener","hide","appendChild","body","listen","selector","querySelectorAll","item","event","preventDefault","url","getAttribute","show","ready","setTimeout","preloadedImage","Image","onload","onShow","src","loading","setInterval","backgroundImage","clearInterval","onHide"],"mappings":"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"}